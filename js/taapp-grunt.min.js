/*!
                                         
  ______  ____    ____    ______  ____  
 /  ___/_/ __ \  /    \  /  ___/_/ __ \ 
 \___ \ \  ___/ |   |  \ \___ \ \  ___/ 
/____  > \___  >|___|  //____  > \___  >
     \/      \/      \/      \/      \/ 
 
*/
(function(t){t.app={}})(window,$),function(t,e,n){n.fn={article:function(){var t=arguments[0].charAt(0);return"A"==t||"a"==t||"E"==t||"e"==t||"I"==t||"i"==t||"O"==t||"o"==t||"U"==t||"u"==t?"an ":"a "},getParamNames:function(t){var e=""+t;return e.slice(e.indexOf("(")+1,e.indexOf(")")).match(/([^\s,]+)/g)||""},getAllRoomItems:function(t){for(var e=[],n=t.containedItems.length,i=0;n>i;i++){e.push(t.containedItems[i]);for(var o=t.containedItems[i].containedItems.length,r=0;o>r;r++)e.push(t.containedItems[i].containedItems[r])}return e}}}(window,$,window.app||{}),function(t,e,n){n.Item=function(t){var e=t||{};this.ambientLight=e.ambientLight||0,this.isStationary=e.isStationary||!1,this.descriptor=e.descriptor,this.isContainer=e.isContainer||!1,this.containedItems=e.containedItems||[],this.comprisedOf=e.comprisedOf||[],this.combineWith=e.combineWith||[],this.getting=e.getting,this.sightDescription=e.sightDescription,this.visualSecret=e.visualSecret,this.visualSecretThreshold=e.visualSecretThreshold||1,this.sounds=e.sounds,this.tastes=e.tastes,this.smells=e.smells,this.touch=e.touch,this.dropping=e.dropping},n.Item.prototype={listContainedItems:function(){if(!this.isContainer)return"The "+this.descriptor[0]+" isn't a container.";var t=this.containedItems.length,e=[];if(0==t)return"The container is empty :(";for(var n=0;t>n;n++)e.push(this.containedItems[n].descriptor[0]);return"<p>The "+this.descriptor[0]+" contains:</p>"+e.join("<br />")},hasItem:function(t){for(var e=0;this.containedItems.length>e;e++)if(t===this.containedItems[e])return!0}}}(window,$,window.app||{}),function(t,e,n){n.Player=function(t){var e=t||{};this.inventory=e.inventory||[],this.discoveredItems=e.discoveredItems||[],this.playerName=e.playerName||"Anonymous"},n.Player.prototype={holdBothItems:function(t){return t.length>2?"You fumble around trying to hold all of those things.":2>t.length?"You wonder what the "+t[0].descriptor[0]+" could be combined with.":!0},hasItem:function(t){for(var e=0;this.inventory.length>e;e++)if(t===this.inventory[e])return!0;for(var e=0;this.inventory.length>e;e++)this.inventory[e].isContainer&&hasItem(t,this.inventory[e]);return!1},look:function(t,e){if(0>=e.ambientLight)return"The inky blackness of your surroundings makes it impossible to see.";if(t.length>=2)return"Try as you might, your eyes will not focus on more than one item.";var i=t[0],o=t[0].sightDescription||"It looks like "+n.fn.article(i.descriptor[0])+i.descriptor[0]+", nothing more.";if(i.visualSecret&&e.ambientLight>=i.visualSecretThreshold){var r=i.visualSecret;o=o.concat(" "+r)}return i===e&&(o+=i.listContainedItems()),o},listen:function(t){return 2>t.length?t[0].sounds||"The "+t[0].descriptor[0]+" isn't emmitting any sounds.":"You think it would be better to listen to one object at a time."},taste:function(t){return 2>t.length?t[0].tastes||"No taste really but you suddenly wonder where the "+t[0].descriptor[0]+" has been.":"You think it would be better to taste one object at a time."},smell:function(t){return 2>t.length?t[0].smells||"There is a slight smell but you can't tell if it's from the item your fingers or the inside of your nose.":"You think it would be better to smell one object at a time"},touch:function(t){return 2>t.length?t[0].touch||"It feels like "+n.fn.article(t[0].descriptor[0])+t[0].descriptor[0]:"You think it would be better to touch one object at a time"},combine:function(t,e,n){if(t[0].combineWith!=t[1].descriptor[0])return"You made nothing";for(var i=Object.keys(n).length,o=i-1;o>=2;o--){var r=n[Object.keys(n)[o]],s=r.comprisedOf.sort().join(),a=t.sort().join();if(s==a){this.inventory.push(r);var h=this.inventory.indexOf(t[0]);this.inventory.splice(h,1);var c=this.inventory.indexOf(t[1]);return this.inventory.splice(c,1),"you made a item"}}},disassemble:function(){},checkInventory:function(t){var e=t.inventory.length;if(e>0){for(var n="You have:<br />",i=0;e>i;i++)n+=t.inventory[i].descriptor[0]+"<br />";return n}return"You have nothing on your person."},search:function(t){if(t.length>=2)return"You think it would be better to search one object at a time";var e=t[0],n=e.containedItems.length;if(!e.isContainer)return"The "+e.descriptor[0]+" isn't a container.";if(n>0){for(var i="In the "+e.descriptor[0]+" You find:<br />",o=0;n>o;o++)i+=e.containedItems[o].descriptor[0]+"<br />";return i}return"You grope around in the "+e.descriptor[0]+", but find nothing."},take:function(t,e){if(t.length>=2)return"You fumble around and end up with nothing.";var n=t[0];if(n.isStationary)return"You don't think that is possible.";if(this.hasItem(n))return"You already have the "+n.descriptor[0];var o="",r="";for(i=0;e.containedItems.length>i;i++)if(n===e.containedItems[i])return r=e.containedItems.indexOf(n),e.containedItems.splice(r,1),this.inventory.push(n),o+=n.descriptor[0],n.getting||"You take the: <br>"+o;for(numItems=e.containedItems.length,j=0;numItems>j;j++)return r=e.containedItems[j].containedItems.indexOf(n),e.containedItems[j].containedItems.splice(r,1),this.inventory.push(n),o+=n.descriptor[0],n.getting||"You take the: <br>"+o},drop:function(t,e){if(t.length>=2)return"You think it would be better to drop one object at a time";var n=t[0];if(!this.hasItem(n))return"You can't drop something you don't have";var i=this.inventory.indexOf(n);return this.inventory.splice(i,1),e.containedItems.push(n),console.log(this.inventory),console.log(e.containedItems),"You drop the: <br>"+n.descriptor[0]},put:function(t,e){if(2>t)return"You need to put something <em>in</em> something else";if(t>2)return"Try putting one item in at a time.";var n=t[0];if(container=t[1],n.isStationary)return"You cannot put a stationary object like the "+n.descriptor[0]+" in the "+container.descriptor[0];if(!container.isContainer)return"The second item is not a container.";if(this.hasItem(n)){var i=this.inventory.indexOf(n);return this.inventory.splice(i,1),container.containedItems.push(n),"You put the "+n.descriptor[0]+" in the "+container.descriptor[0]+"."}if(e.hasItem(n)){var i=e.containedItems.indexOf(n);return e.containedItems.splice(i,1),container.containedItems.push(n),"You put the "+n.descriptor[0]+" in the "+container.descriptor[0]+"."}return"The item is not within your grasp!"}}}(window,$,window.app||{}),function(t,e,n){n.Weapon=function(){this.weapon="yes."},n.Weapon.prototype=new n.Item,n.Weapon.prototype.swing=function(){}}(window,$,window.app||{}),function(t,e,n){n.Room=function(t){var e=t||{};this.ambientLight=e.ambientLight||0,this.isContainer=e.isContainer||!0,this.containedItems=e.containedItems||[],this.descriptor=e.descriptor,this.sightDescription=e.sightDescription,this.visualSecret=e.visualSecret,this.visualSecretThreshold=e.visualSecretThreshold||1,this.sounds=e.sounds,this.taste=e.taste,this.smells=e.smells,this.touch=e.touch},n.Room.prototype=new n.Item({broadcastChat:function(t,e){return t.playerName+'says, "'+e+'"'}})}(window,$,window.app||{}),function(t,e,n){var i={};i.flint=new n.Item({descriptor:["flint"],combineWith:"stone"}),i.stone=new n.Item({descriptor:["stone","flagstone","rock"],combineWith:"flint"}),i.flintStone=new n.Item({descriptor:["Tinderbox"],sightDescription:"you can light stuff with it",comprisedOf:[i.flint,i.stone]}),i.puddle=new n.Item({isStationary:!0,descriptor:["puddle"],isContainer:!0,containedItems:[],visualSecretThreshold:6,sightDescription:"It ripples lightly with every drop.",visualSecret:"As you look closer you can see that there is some depth to it!",sounds:"The only sounds are those of the liquid dripping into it.",tastes:"It tastes like keroseen!",smells:"The puddle smells like something you would remove paint with."}),i.capris=new n.Item({descriptor:["capris","pants"],sightDescription:"Hemmed right above the calve, they'll make anybody wearing them look like an idiot.",sounds:"They make a quiet swishing sound when you walk (stealth -1).",tastes:"You probably don't want to do that.",smells:"You probably don't want to do that.",touch:"They feel light and agile (agility +2)."}),i.sword=new n.Item({descriptor:["sword"],getting:"You're afraid the blade's power will overwhelm you.",sightDescription:"It's the most badass thing you have ever laid your eyes on!",sounds:"Tilting your ear toward it, you can almost hear the whispers and cries of those that fell before it"});var o=new n.Room({descriptor:["room","cell","area","here"],ambientLight:1,containedItems:[i.puddle,i.sword],visualSecretThreshold:1,visualSecret:"There is some writing on the wall. Scratched into the stone, it reads. RDA was here.",sightDescription:"You are in a small 10'x10' room with roughly hewn stone walls joined together flawlessly without mortar. The floor is of the same material but larger and smoother tiles. There are no obvious exits except for a large iron door.",sounds:"drip... drip... drip... The dripping noise is slow and even. It sounds as though droplets are falling into a small puddle nearby, close enough to reach out and touch.",touch:"It's cool where you are. You feel solid and cold stone beneath your feet.",smells:"You sniff the air and are assaulted with the smell of decay and hint of lamp oil."});new n.Room({descriptor:["room2"],containedItems:[i.stone]});var r=new n.Player({playerName:"You",inventory:[i.capris,i.flint,i.stone]});e(function(){var t=e("#readout-content"),s=e("#text-input");e("#hidden-button");var a=function(e){var n={help:'<p>All you have are your senses (<span class="verb_hint">look, listen, feel, smell, taste)</span><br />Example Commands:<br /><span class="verb_hint">look</span> <span class="noun_hint">puddle</span> <br /><span class="verb_hint">listen</span><br /><em>Enter commands below.</em></p>',save:"<p>Your progress has been saved in the imperial scrolls of honor... not really, but soon. Consider it hardcore mode!</p>"},i=e.toLowerCase(),s=i.split(" ");"save"==s[0]?t.append(n.save):"help"==s[0]?t.append(n.help):"inv"==s[0]||"inventory"==s[0]?(narration=r.checkInventory(r),t.append("<p>"+narration+"</p>")):s.length>=1&&(narration=h(s,o),t.append("<p>"+narration+"</p>"))},h=function(t,e){for(var o="",s=[],a=t.length,h=0;a>h;h++){var c=t[h];if("function"==typeof r[c]){o=t[h];var u=t.lastIndexOf(t[h]);t.splice(u,1);break}}var l=r.inventory.concat(n.fn.getAllRoomItems(e)).concat(e),d=l.length;if(a>1)for(var p=0;a>p;p++)for(var m=0;d>m;m++)for(var f=l[m].descriptor.length,v=0;f>v;v++)l[m].descriptor[v]===t[p]&&s.push(l[m]);else s.push(e);if(o){var g=s.length,y=i;return g>0?r[o](s,e,y):"There is no "+t.join(" ")+" for which to "+o}return"Although it may be your wish to "+t.join(" ")+". What would be the point?"};s.focus(),s.on("keyup",function(n){if(13===n.keyCode){var i=e(this).val();""!==i?(a(i),this.value=""):t.append("Sometimes the best course of action is to take no action, but that's not the case here."),e(".readout").animate({scrollTop:e(".readout-content").height()},"fast")}})})}(window,$,window.app||{});